# Project Context

## 目的
- Codexが多様なタスクを実行する際に、計画（PLAN）→タスク（TASKS）→行動ログ（REPORT）を厳密に運用できるようテンプレートと規約を整備する。

## 運用の要点
- セッション開始時に `.codex/runs/<run_id>/` を作成し、テンプレートをコピーする。
- 別セッションでは既存runへの追記をデフォルトで行わず、新しいrunを作成する（既存runの継続はユーザー明示時のみ）。
- 思考や判断理由は PLAN の Thinking Log に追記する。
- 実装・調査などの行動ログは REPORT に逐次追記する。
- 追加タスクは TASKS の Discovered に追記する。
- `docs/PROJECT_CONTEXT.md` は各プロジェクトの実態に合わせて調整し、開発の進行に伴って更新し続ける。
- 完了報告前の品質ゲートでは、プロジェクトで設定されている formatter / lint / typecheck を実行し、エラーがないことを確認してから報告する。
- 運用ドキュメントの言語方針として、`PLAN.md` / `TASKS.md` / `REPORT.md` は日本語で記述し、`AGENTS.md` は英語のみで管理する。

## ディレクトリ構成
- `.codex/templates/`: PLAN/TASKS/REPORT のテンプレート
- `.codex/runs/`: セッションごとの実行ログ
- `docs/adr/`: 運用や方針の意思決定記録

## AGENTS拡張運用の指針
- プロジェクト固有のツール/スキル指示を分離したい場合は、ルート `AGENTS.md` に「追加指示ファイルの読込順」を明記し、詳細は別ファイル（例: `docs/agent/overrides.md`）に置く。
- 追加指示ファイルは任意ファイルとして扱い、作業開始前に `docs/agent/overrides.md` の存在有無を確認し、存在する場合のみ読み込む。
- 上記の参照型は、共通ルール（AGENTS）と可変ルール（追加指示）を分離でき、更新差分を小さく保ちやすい。
- ディレクトリ単位で強い上書きが必要な場合は、対象配下に別の `AGENTS.md` を置く階層型を使う。スコープ境界が明確になる一方で、複数ファイル間の整合管理コストが増える。
- 運用推奨:
  - リポジトリ共通の方針変更が多い場合: 参照型を第一選択。
  - サブディレクトリごとに責務・技術栈が大きく異なる場合: 階層型を併用。
